name: NodeJS with Gulp

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [12.x, 14.x, 16.x]
    
    steps:
    - uses: actions/checkout@v2

    - name: Use Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v1
      with:
        node-version: ${{ matrix.node-version }}

    - name: Build
      run: |
        npm install
        gulp default
    - name: Simple Github Pages Deployment
      # You may pin to the exact commit or the version.
      # uses: Daniele-Tentoni/simple-github-pages-deployment@a3bf07e83b4967a1c61852a7092ffcecb106e305
      uses: Daniele-Tentoni/simple-github-pages-deployment@v1.0.1
      with:
        username: 'githiago-f'
        reponame: 'poalab'
        token: ${GH_LOCAL_TOKEN}
        gitmsg: 'Publicou em github pages'
        # Move to this directory before deploy
        directory: './dest'
